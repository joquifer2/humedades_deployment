{"version":3,"sources":["components/CanvasToolbar.module.css","img/undo.png","components/CanvasToolbar.tsx","img/download.png","img/bin.png","components/UpdateStreamlit.tsx","DrawableCanvasState.tsx","lib/fabrictool.ts","lib/circle.ts","lib/freedraw.ts","lib/line.ts","lib/polygon.ts","lib/rect.ts","lib/transform.ts","lib/point.ts","lib/index.ts","DrawableCanvas.tsx","index.tsx"],"names":["module","exports","SquareIcon","_ref","imgUrl","altText","invertX","size","enabled","clickCallback","React","createElement","src","className","concat","styles","disabled","invertx","alt","title","height","width","onClick","defaultProps","CanvasToolbar","_ref2","topPosition","canUndo","leftPosition","canRedo","downloadCallback","undoCallback","redoCallback","resetCallback","iconElements","undo","style","position","top","left","display","gap","zIndex","map","e","key","UpdateStreamlit","props","_useState3","useState","fabric","Canvas","_useState4","_slicedToArray","stCanvas","setStCanvas","debouncedStateToSend","value","delay","_useState","_useState2","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","stateToSendToStreamlit","stC","enableRetinaScaling","shouldSendToStreamlit","loadFromJSON","canvas","data","getContext","toDataURL","Streamlit","setComponentValue","getWidth","getHeight","raw","toObject","sendDataToStreamlit","id","canvasWidth","canvasHeight","NO_ACTION","shouldReloadCanvas","forceSendToStreamlit","RELOAD_CANVAS","SEND_TO_STREAMLIT","RELOAD_AND_SEND_TO_STREAMLIT","canvasStateReducer","state","action","type","isEmpty","currentState","history","undoStack","redoStack","_objectSpread","initialState","isEqual","undoOverHistoryMaxCount","length","_toConsumableArray","slice","Error","isUndoEmpty","CanvasStateContext","createContext","CanvasStateProvider","children","_useReducer","useReducer","_useReducer2","canvasState","dispatch","saveState","useCallback","redo","forceStreamlitUpdate","resetState","Provider","FabricTool","_createClass","_classCallCheck","_canvas","this","CircleTool","_FabricTool","_inherits","_super","_createSuper","_this","_len","arguments","args","Array","_key","call","apply","isMouseDown","fillColor","strokeWidth","strokeColor","currentCircle","Circle","currentStartX","currentStartY","_minRadius","linearDistance","point1","point2","xs","x","ys","y","Math","sqrt","_this2","isDrawingMode","selection","forEachObject","o","selectable","evented","on","onMouseDown","onMouseMove","onMouseUp","onMouseOut","off","_clicked","pointer","getPointer","originX","originY","stroke","fill","radius","add","_radius","set","max","angle","atan2","PI","setCoords","renderAll","FreedrawTool","freeDrawingBrush","color","LineTool","currentLine","Line","points","x2","y2","remove","PolygonTool","startCircle","currentPath","Path","_pathString","onMouseDoubleClick","_start","i","_last_pt_idx","lastIndexOf","RectTool","currentRect","Rect","_minLength","transparentCorners","strokeUniform","noScaleCache","abs","_width","_height","TransformTool","handleDoubleClick","getActiveObject","PointTool","displayRadius","tools","circle","freedraw","line","polygon","rect","transform","point","withStreamlitConnection","backgroundColor","backgroundImageURL","realtimeUpdateStreamlit","drawingMode","initialDrawing","displayToolbar","setCanvas","stopContextMenu","fireRightClick","StaticCanvas","backgroundCanvas","setBackgroundCanvas","_useCanvasState","useContext","_useCanvasState$canva","_useCanvasState$canva2","c","imgC","setFrameHeight","_getStreamlitBaseUrl","bgImage","Image","onload","drawImage","baseUrl","URLSearchParams","window","location","search","get","URL","origin","_unused","getStreamlitBaseUrl","cleanupToolEvents","configureCanvas","toJSON","visibility","border","ReactDOM","render","StrictMode","DrawableCanvas","document","getElementById"],"mappings":"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","file":"static/js/main.80185090.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"enabled\":\"CanvasToolbar_enabled__2bOtL\",\"disabled\":\"CanvasToolbar_disabled__T9sX8\",\"invertx\":\"CanvasToolbar_invertx__2gc2O\"};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAwwAAAMMBnc7+MwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEFSURBVEiJ7dSxLkRBFMbx31BIlkQlHoCap5BQLAXvQafV6DyLRLYSdkWv0dBQ0NAKkUhkj2bEzc3udW9xE5E9yVfNd85/5pyZSRGhzZhqtfoE8DcAKaVOqwD0mkBSSnNNAAmBAboR8V4qtoguVrNWMI9n3Gad4SQqHlRk9dHJvmns4qWwXqUrbESEspSMfazhekyhN9zhc8z6KWarAKN0jm0sI+WkmdyuPTyV/JdFSBXgATujjl3aYQf7+CjkXhTaPRYw+DbVETZLkMM6Leo3hGxhmHNfsVBnBk0hx4XcozqARpA8/GG+bQcJ6+rFTUQ81jGmlJYi4p6fa9da/IPvegL4Lb4A0uc9nRaYXwcAAAAASUVORK5CYII=\"","import React from \"react\"\n\nimport styles from \"./CanvasToolbar.module.css\"\n\nimport bin from \"../img/bin.png\"\nimport undo from \"../img/undo.png\"\nimport download from \"../img/download.png\"\n\ninterface SquareIconProps {\n  imgUrl: string\n  altText: string\n  invertX?: boolean\n  size: number\n  enabled: boolean\n  clickCallback: () => void\n}\n\nconst SquareIcon = ({\n  imgUrl,\n  altText,\n  invertX,\n  size,\n  enabled,\n  clickCallback,\n}: SquareIconProps) => (\n  <img\n    src={imgUrl}\n    className={`\n    ${enabled ? styles.enabled : styles.disabled} ${\n      invertX ? \"\" : styles.invertx\n    }\n    `}\n    alt={altText}\n    title={altText}\n    height={`${size}px`}\n    width={`${size}px`}\n    onClick={clickCallback}\n  />\n)\nSquareIcon.defaultProps = {\n  invertX: false,\n}\n\ninterface CanvasToolbarProps {\n  topPosition: number\n  leftPosition: number\n  canUndo: boolean\n  canRedo: boolean\n  downloadCallback: () => void\n  undoCallback: () => void\n  redoCallback: () => void\n  resetCallback: () => void\n}\n\nconst CanvasToolbar = ({\n  topPosition,\n  leftPosition,\n  canUndo,\n  canRedo,\n  downloadCallback,\n  undoCallback,\n  redoCallback,\n  resetCallback,\n}: CanvasToolbarProps) => {\n  const GAP_BETWEEN_ICONS = 4\n  const ICON_SIZE = 24\n\n  const iconElements = [\n    {\n      imgUrl: download,\n      altText: \"Send to Streamlit\",\n      invertX: false,\n      enabled: true,\n      clickCallback: downloadCallback,\n    },\n    {\n      imgUrl: undo,\n      altText: \"Undo\",\n      invertX: true,\n      enabled: canUndo,\n      clickCallback: canUndo ? undoCallback : () => {},\n    },\n    {\n      imgUrl: undo,\n      altText: \"Redo\",\n      invertX: false,\n      enabled: canRedo,\n      clickCallback: canRedo ? redoCallback : () => {},\n    },\n    {\n      imgUrl: bin,\n      altText: \"Reset canvas & history\",\n      invertX: false,\n      enabled: true,\n      clickCallback: resetCallback,\n    },\n  ]\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: topPosition + 4,\n        left: 0,\n        display: \"flex\",\n        gap: GAP_BETWEEN_ICONS,\n        zIndex: 20,\n      }}\n    >\n      {iconElements.map((e) => (\n        <SquareIcon\n          key={e.altText}\n          imgUrl={e.imgUrl}\n          altText={e.altText}\n          invertX={e.invertX}\n          size={ICON_SIZE}\n          enabled={e.enabled}\n          clickCallback={e.clickCallback}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default CanvasToolbar\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEYSURBVEiJ7dS9SgNBFMXxX0y0NNpLqjQiKRRETON7aBMfwLfxDcRGC8HOTm21s7RIYZdniGiRO+6y5mNXVxD0wMBw58z532Fnh1+kFq5jNH8C0MFbjE7ZTUsVAEsz5rUBvqR/wB8CNLFeY+5aZH4ArjDCXsHYNv+vbWK1UNuNrMs8oGfyFGzmjDthvA9QUe1YG4U3aQvL2M4DpqkRHfZxU4C0o9aPxhpzcsDQ5I0ZFOpHGMfas+wtSvNxePIaxNpw0QngHIcR1M3Vu3jFcXhmqsw1vZCdJCmFny3a3CoBSBAm3TbKhlcBJEj6Vo9lN1UBwENF/yfAAVaqhhS0P614J7uCdY1bsh+kh1NsfLP7pBec4KmmvNl6B0BuQt0zCQ0xAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHUSURBVEiJtda9ahRRFAfw3xHFJCabFEkawcYiYKMWVmohBHwFOwsfQLCxthOENHZqKxZG8DHSxcJC0Qcw7AqSNSoGci3mznp3nP0K8cBlZs7X/5z//RopJeMGlrGL1Bi7WJ4Uf9pk2cQVPMDPrJvHVra9GRc8BBARS7iKU4X6cn5+wvf8vljbIuJr4XuEdyml/YGmoGIdX/xLxayji/U2iu5iJXfwa1zbY2QOOznXE4YpuoE93D5m8lr2cLMN4BWu4TF+4HDGxIEOeng90DaW5BkVj/fyd6dhP4u5hq6Tnxdz7GZpL1eLlNIhvmEtq7Yj4mHhsoWng5Ir23b+rGO6Zc62fdAtnFewUdjOqyaylo3sMxJgqIMsvcJ5X8XrKFlCvwHQmwRQdjArwH5K6fc0AKvHAFjVoGcUwCwUdbKPHNNrOpw0RVN10MVCRCz8T4A6oI/FiIiTBKh5XFN1EDnRkETEnGrnH2sOSoC60rbqoR8R8zg3bQe102oB0DYPAwB/l/VkgJTSgeo+KDtoA6h1fSN2Me1nUV3JOj7iOT5k/csi5jNe4D2uj+og8lE7rIx4hjt4hIMRRZRyX7UYLqWUjoYsI35VLuCt6tKZ5h7ewa22XH8AgjMTispa6ucAAAAASUVORK5CYII=\"","import React, { useEffect, useState } from \"react\"\nimport { Streamlit } from \"streamlit-component-lib\"\nimport { fabric } from \"fabric\"\n\nconst DELAY_DEBOUNCE = 200\n\n/**\n * Download image and JSON data from canvas to send back to Streamlit\n */\nconst sendDataToStreamlit = (canvas: fabric.Canvas): void => {\n  const data = canvas\n    .getContext()\n    .canvas.toDataURL()\n  Streamlit.setComponentValue({\n    data: data,\n    width: canvas.getWidth(),\n    height: canvas.getHeight(),\n    raw: canvas.toObject(),\n  })\n}\n\n/**\n * This hook allows you to debounce any fast changing value.\n * The debounced value will only reflect the latest value when the useDebounce hook has not been called for the specified time period.\n * When used in conjunction with useEffect, you can easily ensure that expensive operations like API calls are not executed too frequently.\n * https://usehooks.com/useDebounce/\n * @param value value to debounce\n * @param delay delay of debounce in ms\n */\nconst useDebounce = (value: any, delay: number) => {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value)\n      }, delay)\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler)\n      }\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  )\n  return debouncedValue\n}\n\ninterface UpdateStreamlitProps {\n  shouldSendToStreamlit: boolean\n  stateToSendToStreamlit: Object\n  canvasWidth: number\n  canvasHeight: number\n}\n\n/**\n * Canvas whose sole purpose is to draw current state\n * to send image data to Streamlit.\n * Put it in the background or make it invisible!\n */\nconst UpdateStreamlit = (props: UpdateStreamlitProps) => {\n  const [stCanvas, setStCanvas] = useState(new fabric.Canvas(\"\"))\n\n  // Debounce fast changing canvas states\n  // Especially when drawing lines and circles which continuously render while drawing\n  const debouncedStateToSend = useDebounce(\n    props.stateToSendToStreamlit,\n    DELAY_DEBOUNCE\n  )\n\n  // Initialize canvas\n  useEffect(() => {\n    const stC = new fabric.Canvas(\"canvas-to-streamlit\", {\n      enableRetinaScaling: false,\n    })\n    setStCanvas(stC)\n  }, [])\n\n  // Load state to canvas, then send content to Streamlit\n  useEffect(() => {\n    if (debouncedStateToSend && props.shouldSendToStreamlit) {\n      stCanvas.loadFromJSON(debouncedStateToSend, () => {\n        sendDataToStreamlit(stCanvas)\n      })\n    }\n  }, [stCanvas, props.shouldSendToStreamlit, debouncedStateToSend])\n\n  return (\n    <canvas\n      id=\"canvas-to-streamlit\"\n      width={props.canvasWidth}\n      height={props.canvasHeight}\n    />\n  )\n}\n\nexport default UpdateStreamlit\n","import React, {\n  createContext,\n  useReducer,\n  useContext,\n  useCallback,\n} from \"react\"\nimport { isEmpty, isEqual } from \"lodash\"\n\nconst HISTORY_MAX_COUNT = 100\n\ninterface CanvasHistory {\n  undoStack: Object[] // store previous canvas states\n  redoStack: Object[] // store undone canvas states\n}\n\ninterface CanvasAction {\n  shouldReloadCanvas: boolean // reload currentState into app canvas, on undo/redo\n  forceSendToStreamlit: boolean // send currentState back to Streamlit\n}\n\nconst NO_ACTION: CanvasAction = {\n  shouldReloadCanvas: false,\n  forceSendToStreamlit: false,\n}\n\nconst RELOAD_CANVAS: CanvasAction = {\n  shouldReloadCanvas: true,\n  forceSendToStreamlit: false,\n}\n\nconst SEND_TO_STREAMLIT: CanvasAction = {\n  shouldReloadCanvas: false,\n  forceSendToStreamlit: true,\n}\n\nconst RELOAD_AND_SEND_TO_STREAMLIT: CanvasAction = {\n  shouldReloadCanvas: true,\n  forceSendToStreamlit: true,\n}\n\ninterface CanvasState {\n  history: CanvasHistory\n  action: CanvasAction\n  initialState: Object // first currentState for app\n  currentState: Object // current canvas state as canvas.toJSON()\n}\n\ninterface Action {\n  type: \"save\" | \"undo\" | \"redo\" | \"reset\" | \"forceSendToStreamlit\"\n  state?: Object\n}\n\n/**\n * Reducer takes 5 actions: save, undo, redo, reset, forceSendToStreamlit\n *\n * On reset, clear everything, set initial and current state to cleared canvas\n *\n * On save:\n * - First, if there is no initial state, set it to current\n *   Since we don't reset history on component initialization\n *   As backgroundColor/image are applied after component init\n *   and wouldn't be stored in initial state\n * - If the sent state is same as current state, then nothing has changed so don't save\n * - Clear redo stack\n * - Push current state to undo stack, delete oldest if necessary\n * - Set new current state\n *\n * On undo:\n * - Push state to redoStack if it's not the initial\n * - Pop state from undoStack into current state\n *\n * On redo:\n * - Pop state from redoStack into current state\n *\n * For undo/redo/reset, set shouldReloadCanvas to inject currentState into user facing canvas\n */\nconst canvasStateReducer = (\n  state: CanvasState,\n  action: Action\n): CanvasState => {\n  switch (action.type) {\n    case \"save\":\n      if (!action.state) throw new Error(\"No action state to save\")\n      else if (isEmpty(state.currentState)) {\n        return {\n          history: {\n            undoStack: [],\n            redoStack: [],\n          },\n          action: { ...NO_ACTION },\n          initialState: action.state,\n          currentState: action.state,\n        }\n      } else if (isEqual(action.state, state.currentState))\n        return {\n          history: { ...state.history },\n          action: { ...NO_ACTION },\n          initialState: state.initialState,\n          currentState: state.currentState,\n        }\n      else {\n        const undoOverHistoryMaxCount =\n          state.history.undoStack.length >= HISTORY_MAX_COUNT\n        return {\n          history: {\n            undoStack: [\n              ...state.history.undoStack.slice(undoOverHistoryMaxCount ? 1 : 0),\n              state.currentState,\n            ],\n            redoStack: [],\n          },\n          action: { ...NO_ACTION },\n          initialState:\n            state.initialState == null\n              ? state.currentState\n              : state.initialState,\n          currentState: action.state,\n        }\n      }\n    case \"undo\":\n      if (\n        isEmpty(state.currentState) ||\n        isEqual(state.initialState, state.currentState)\n      ) {\n        return {\n          history: { ...state.history },\n          action: { ...NO_ACTION },\n          initialState: state.initialState,\n          currentState: state.currentState,\n        }\n      } else {\n        const isUndoEmpty = state.history.undoStack.length === 0\n        return {\n          history: {\n            undoStack: state.history.undoStack.slice(0, -1),\n            redoStack: [...state.history.redoStack, state.currentState],\n          },\n          action: { ...RELOAD_CANVAS },\n          initialState: state.initialState,\n          currentState: isUndoEmpty\n            ? state.currentState\n            : state.history.undoStack[state.history.undoStack.length - 1],\n        }\n      }\n    case \"redo\":\n      if (state.history.redoStack.length > 0) {\n        // TODO: test currentState empty too ?\n        return {\n          history: {\n            undoStack: [...state.history.undoStack, state.currentState],\n            redoStack: state.history.redoStack.slice(0, -1),\n          },\n          action: { ...RELOAD_CANVAS },\n          initialState: state.initialState,\n          currentState:\n            state.history.redoStack[state.history.redoStack.length - 1],\n        }\n      } else {\n        return {\n          history: { ...state.history },\n          action: { ...NO_ACTION },\n          initialState: state.initialState,\n          currentState: state.currentState,\n        }\n      }\n    case \"reset\":\n      if (!action.state) throw new Error(\"No action state to store in reset\")\n      return {\n        history: {\n          undoStack: [],\n          redoStack: [],\n        },\n        action: { ...RELOAD_AND_SEND_TO_STREAMLIT },\n        initialState: action.state,\n        currentState: action.state,\n      }\n    case \"forceSendToStreamlit\":\n      return {\n        history: { ...state.history },\n        action: { ...SEND_TO_STREAMLIT },\n        initialState: state.initialState,\n        currentState: state.currentState,\n      }\n    default:\n      throw new Error(\"TS should protect from this\")\n  }\n}\n\nconst initialState: CanvasState = {\n  history: {\n    undoStack: [],\n    redoStack: [],\n  },\n  action: {\n    forceSendToStreamlit: false,\n    shouldReloadCanvas: false,\n  },\n  initialState: {},\n  currentState: {},\n}\n\ninterface CanvasStateContextProps {\n  canvasState: CanvasState\n  saveState: (state: Object) => void\n  undo: () => void\n  redo: () => void\n  forceStreamlitUpdate: () => void\n  canUndo: boolean\n  canRedo: boolean\n  resetState: (state: Object) => void\n}\n\nconst CanvasStateContext = createContext<CanvasStateContextProps>(\n  {} as CanvasStateContextProps\n)\n\nexport const CanvasStateProvider = ({\n  children,\n}: React.PropsWithChildren<{}>) => {\n  const [canvasState, dispatch] = useReducer(canvasStateReducer, initialState)\n\n  // Setup our callback functions\n  // We memoize with useCallback to prevent unnecessary re-renders\n  const saveState = useCallback(\n    (state) => dispatch({ type: \"save\", state: state }),\n    [dispatch]\n  )\n  const undo = useCallback(() => dispatch({ type: \"undo\" }), [dispatch])\n  const redo = useCallback(() => dispatch({ type: \"redo\" }), [dispatch])\n  const forceStreamlitUpdate = useCallback(\n    () => dispatch({ type: \"forceSendToStreamlit\" }),\n    [dispatch]\n  )\n  const resetState = useCallback(\n    (state) => dispatch({ type: \"reset\", state: state }),\n    [dispatch]\n  )\n\n  const canUndo = canvasState.history.undoStack.length !== 0\n  const canRedo = canvasState.history.redoStack.length !== 0\n\n  return (\n    <CanvasStateContext.Provider\n      value={{\n        canvasState,\n        saveState,\n        undo,\n        redo,\n        canUndo,\n        canRedo,\n        forceStreamlitUpdate,\n        resetState,\n      }}\n    >\n      {children}\n    </CanvasStateContext.Provider>\n  )\n}\n\n/**\n * Hook to get data out of context\n */\nexport const useCanvasState = () => {\n  return useContext(CanvasStateContext)\n}\n","import { fabric } from \"fabric\"\n\nexport interface ConfigureCanvasProps {\n    fillColor: string\n    strokeWidth: number\n    strokeColor: string\n    displayRadius: number\n}\n\n/**\n * Base class for any fabric tool that configures and draws on canvas\n */\nabstract class FabricTool {\n  protected _canvas: fabric.Canvas\n\n  /**\n   * Pass Fabric canvas by reference so tools can configure it\n   */\n  constructor(canvas: fabric.Canvas) {\n    this._canvas = canvas\n  }\n\n  /**\n   * Configure canvas and return a callback to clean eventListeners\n   * @param args\n   */\n  abstract configureCanvas(args: ConfigureCanvasProps): () => void\n}\n\nexport default FabricTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass CircleTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentCircle: fabric.Circle = new fabric.Circle()\n  currentStartX: number = 0\n  currentStartY: number = 0\n  _minRadius: number = 10\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n    this._minRadius = strokeWidth\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    let pointer = canvas.getPointer(o.e)\n    this.currentStartX = pointer.x\n    this.currentStartY = pointer.y\n    this.currentCircle = new fabric.Circle({\n      left: this.currentStartX,\n      top: this.currentStartY,\n      originX: \"left\",\n      originY: \"center\",\n      strokeWidth: this.strokeWidth,\n      stroke: this.strokeColor,\n      fill: this.fillColor,\n      selectable: false,\n      evented: false,\n      radius: this._minRadius,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentCircle)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    let pointer = canvas.getPointer(o.e)\n    let _radius =\n      this.linearDistance(\n        { x: this.currentStartX, y: this.currentStartY },\n        { x: pointer.x, y: pointer.y }\n      ) / 2\n    this.currentCircle.set({\n      radius: Math.max(_radius, this._minRadius),\n      angle:\n        (Math.atan2(\n          pointer.y - this.currentStartY,\n          pointer.x - this.currentStartX\n        ) *\n          180) /\n        Math.PI,\n    })\n    this.currentCircle.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n\n  /**\n   * Calculate the distance of two x,y points\n   *\n   * @param point1 an object with x,y attributes representing the start point\n   * @param point2 an object with x,y attributes representing the end point\n   *\n   * @returns {number}\n   */\n  linearDistance = (point1: any, point2: any) => {\n    let xs = point2.x - point1.x\n    let ys = point2.y - point1.y\n    return Math.sqrt(xs * xs + ys * ys)\n  }\n}\n\nexport default CircleTool\n","import FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass FreedrawTool extends FabricTool {\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = true\n    this._canvas.freeDrawingBrush.width = strokeWidth\n    this._canvas.freeDrawingBrush.color = strokeColor\n    return () => {}\n  }\n}\n\nexport default FreedrawTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass LineTool extends FabricTool {\n  isMouseDown: boolean = false\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentLine: fabric.Line = new fabric.Line()\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    var pointer = canvas.getPointer(o.e)\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y]\n    this.currentLine = new fabric.Line(points, {\n      strokeWidth: this.strokeWidth,\n      fill: this.strokeColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentLine)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    var pointer = canvas.getPointer(o.e)\n    this.currentLine.set({ x2: pointer.x, y2: pointer.y })\n    this.currentLine.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n    let canvas = this._canvas\n    if (this.currentLine.width === 0 && this.currentLine.height === 0) {\n      canvas.remove(this.currentLine)\n    }\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n}\n\nexport default LineTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass PolygonTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  startCircle: fabric.Circle = new fabric.Circle()\n  currentLine: fabric.Line = new fabric.Line()\n  currentPath: fabric.Path = new fabric.Path()\n  _pathString: string = \"M \"\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    this._canvas.on(\"mouse:dblclick\", (e: any) => this.onMouseDoubleClick(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n      this._canvas.off(\"mouse:dblclick\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    let _start = false\n    if (this._pathString === \"M \") {\n      _start = true\n    }\n\n    this.isMouseDown = true\n    var pointer = canvas.getPointer(o.e)\n\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y]\n    canvas.remove(this.currentLine)\n    this.currentLine = new fabric.Line(points, {\n      strokeWidth: this.strokeWidth,\n      fill: this.strokeColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentLine)\n    }\n\n    if (_start && _clicked === 0) {\n      // Initialize pathString\n      this._pathString += `${pointer.x} ${pointer.y} `\n      this.startCircle = new fabric.Circle({\n        left: pointer.x,\n        top: pointer.y,\n        originX: \"center\",\n        originY: \"center\",\n        strokeWidth: this.strokeWidth,\n        stroke: this.strokeColor,\n        fill: this.strokeColor,\n        selectable: false,\n        evented: false,\n        radius: this.strokeWidth,\n      })\n      canvas.add(this.startCircle)\n\n      _start = false\n    } else {\n      canvas.remove(this.currentPath)\n      if (_clicked === 0) {\n        // Update pathString\n        this._pathString += `L ${pointer.x} ${pointer.y} `\n      }\n      if (_clicked === 2) {\n        // Close pathString\n        this._pathString += \"z\"\n        canvas.remove(this.startCircle)\n      }\n    }\n    this.currentPath = new fabric.Path(this._pathString, {\n      strokeWidth: this.strokeWidth,\n      fill: this.fillColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    if (this.currentPath.width !== 0 && this.currentPath.height !== 0) {\n      canvas.add(this.currentPath)\n    }\n    if (_clicked === 2) {\n      this._pathString = \"M \"\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    var pointer = canvas.getPointer(o.e)\n    this.currentLine.set({ x2: pointer.x, y2: pointer.y })\n    this.currentLine.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = true\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseDoubleClick(o: any) {\n    let canvas = this._canvas\n    // Double click adds two more points at the end, so we have to move back twice more...\n    for (let i = 0; i < 3; i++) {\n      let _last_pt_idx = this._pathString.lastIndexOf(\"L\")\n      if (_last_pt_idx === -1) {\n        this._pathString = \"M \"\n        canvas.remove(this.startCircle)\n      } else {\n        this._pathString = this._pathString.slice(0, _last_pt_idx)\n      }\n    }\n\n    canvas.remove(this.currentLine)\n    canvas.remove(this.currentPath)\n    this.currentPath = new fabric.Path(this._pathString, {\n      strokeWidth: this.strokeWidth,\n      fill: this.fillColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    canvas.add(this.currentPath)\n  }\n}\nexport default PolygonTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass RectTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentRect: fabric.Rect = new fabric.Rect()\n  currentStartX: number = 0\n  currentStartY: number = 0\n  _minLength: number = 10\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n    this._minLength = strokeWidth\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    let pointer = canvas.getPointer(o.e)\n    this.currentStartX = pointer.x\n    this.currentStartY = pointer.y\n    this.currentRect = new fabric.Rect({\n      left: this.currentStartX,\n      top: this.currentStartY,\n      originX: \"left\",\n      originY: \"top\",\n      width: this._minLength,\n      height: this._minLength,\n      stroke: this.strokeColor,\n      strokeWidth: this.strokeWidth,\n      fill: this.fillColor,\n      transparentCorners: false,\n      selectable: false,\n      evented: false,\n      strokeUniform: true,\n      noScaleCache: false,\n      angle: 0,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentRect)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    let pointer = canvas.getPointer(o.e)\n    if (this.currentStartX > pointer.x) {\n      this.currentRect.set({ left: Math.abs(pointer.x) })\n    }\n    if (this.currentStartY > pointer.y) {\n      this.currentRect.set({ top: Math.abs(pointer.y) })\n    }\n    let _width = Math.abs(this.currentStartX - pointer.x)\n    let _height = Math.abs(this.currentStartY - pointer.y)\n    this.currentRect.set({\n      width: Math.max(_width, this._minLength * 2),\n      height: Math.max(_height, this._minLength * 2),\n    })\n    this.currentRect.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n}\n\nexport default RectTool\n","import FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass TransformTool extends FabricTool {\n  configureCanvas(args: ConfigureCanvasProps): () => void {\n    let canvas = this._canvas\n    canvas.isDrawingMode = false\n    canvas.selection = true\n    canvas.forEachObject((o) => (o.selectable = o.evented = true))\n\n    // instead of looking for target of double click,\n    // assume double click on object clears the selected object\n    const handleDoubleClick = () => {\n      canvas.remove(canvas.getActiveObject())\n    }\n\n    canvas.on(\"mouse:dblclick\", handleDoubleClick)\n    return () => {\n      canvas.off(\"mouse:dblclick\", handleDoubleClick)\n    }\n  }\n}\n\nexport default TransformTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass PointTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentCircle: fabric.Circle = new fabric.Circle()\n  currentStartX: number = 0\n  currentStartY: number = 0\n  displayRadius: number = 1\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n    displayRadius\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n    this.displayRadius = displayRadius\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    let pointer = canvas.getPointer(o.e)\n    this.currentStartX = pointer.x - (this.displayRadius + this.strokeWidth / 2.)\n    this.currentStartY = pointer.y //- (this._minRadius + this.strokeWidth)\n    this.currentCircle = new fabric.Circle({\n      left: this.currentStartX,\n      top: this.currentStartY,\n      originX: \"left\",\n      originY: \"center\",\n      strokeWidth: this.strokeWidth,\n      stroke: this.strokeColor,\n      fill: this.fillColor,\n      selectable: false,\n      evented: false,\n      radius: this.displayRadius,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentCircle)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    this.currentCircle.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n\n}\n\nexport default PointTool\n","import CircleTool from \"./circle\"\nimport FabricTool from \"./fabrictool\"\nimport FreedrawTool from \"./freedraw\"\nimport LineTool from \"./line\"\nimport PolygonTool from \"./polygon\"\nimport RectTool from \"./rect\"\nimport TransformTool from \"./transform\"\nimport PointTool from \"./point\"\n\n// TODO: Should make TS happy on the Map of selectedTool --> FabricTool\nconst tools: any = {\n  circle: CircleTool,\n  freedraw: FreedrawTool,\n  line: LineTool,\n  polygon: PolygonTool,\n  rect: RectTool,\n  transform: TransformTool,\n  point: PointTool\n}\n\nexport { tools, FabricTool }\n","import React, { useEffect, useState } from \"react\"\nimport {\n  ComponentProps,\n  Streamlit,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport { fabric } from \"fabric\"\nimport { isEqual } from \"lodash\"\n\nimport CanvasToolbar from \"./components/CanvasToolbar\"\nimport UpdateStreamlit from \"./components/UpdateStreamlit\"\n\nimport { useCanvasState } from \"./DrawableCanvasState\"\nimport { tools, FabricTool } from \"./lib\"\n\nfunction getStreamlitBaseUrl(): string | null {\n  const params = new URLSearchParams(window.location.search)\n  const baseUrl = params.get(\"streamlitUrl\")\n  if (baseUrl == null) {\n    return null\n  }\n\n  try {\n    return new URL(baseUrl).origin\n  } catch {\n    return null\n  }\n}\n\n/**\n * Arguments Streamlit receives from the Python side\n */\nexport interface PythonArgs {\n  fillColor: string\n  strokeWidth: number\n  strokeColor: string\n  backgroundColor: string\n  backgroundImageURL: string\n  realtimeUpdateStreamlit: boolean\n  canvasWidth: number\n  canvasHeight: number\n  drawingMode: string\n  initialDrawing: Object\n  displayToolbar: boolean\n  displayRadius: number\n}\n\n/**\n * Define logic for the canvas area\n */\nconst DrawableCanvas = ({ args }: ComponentProps) => {\n  const {\n    canvasWidth,\n    canvasHeight,\n    backgroundColor,\n    backgroundImageURL,\n    realtimeUpdateStreamlit,\n    drawingMode,\n    fillColor,\n    strokeWidth,\n    strokeColor,\n    displayRadius,\n    initialDrawing,\n    displayToolbar,\n  }: PythonArgs = args\n\n  /**\n   * State initialization\n   */\n  const [canvas, setCanvas] = useState(new fabric.Canvas(\"\"))\n  canvas.stopContextMenu = true\n  canvas.fireRightClick = true\n\n  const [backgroundCanvas, setBackgroundCanvas] = useState(\n    new fabric.StaticCanvas(\"\")\n  )\n  const {\n    canvasState: {\n      action: { shouldReloadCanvas, forceSendToStreamlit },\n      currentState,\n      initialState,\n    },\n    saveState,\n    undo,\n    redo,\n    canUndo,\n    canRedo,\n    forceStreamlitUpdate,\n    resetState,\n  } = useCanvasState()\n\n  /**\n   * Initialize canvases on component mount\n   * NB: Remount component by changing its key instead of defining deps\n   */\n  useEffect(() => {\n    const c = new fabric.Canvas(\"canvas\", {\n      enableRetinaScaling: false,\n    })\n    const imgC = new fabric.StaticCanvas(\"backgroundimage-canvas\", {\n      enableRetinaScaling: false,\n    })\n    setCanvas(c)\n    setBackgroundCanvas(imgC)\n    Streamlit.setFrameHeight()\n  }, [])\n\n  /**\n   * Load user drawing into canvas\n   * Python-side is in charge of initializing drawing with background color if none provided\n   */\n  useEffect(() => {\n    if (!isEqual(initialState, initialDrawing)) {\n      canvas.loadFromJSON(initialDrawing, () => {\n        canvas.renderAll()\n        resetState(initialDrawing)\n      })\n    }\n  }, [canvas, initialDrawing, initialState, resetState])\n\n  /**\n   * Update background image\n   */\n  useEffect(() => {\n    if (backgroundImageURL) {\n      var bgImage = new Image();\n      bgImage.onload = function() {\n        backgroundCanvas.getContext().drawImage(bgImage, 0, 0);\n      };\n      const baseUrl = getStreamlitBaseUrl() ?? \"\"\n      bgImage.src = baseUrl + backgroundImageURL\n    }\n  }, [\n    canvas,\n    backgroundCanvas,\n    canvasHeight,\n    canvasWidth,\n    backgroundColor,\n    backgroundImageURL,\n    saveState,\n  ])\n\n  /**\n   * If state changed from undo/redo/reset, update user-facing canvas\n   */\n  useEffect(() => {\n    if (shouldReloadCanvas) {\n      canvas.loadFromJSON(currentState, () => {})\n    }\n  }, [canvas, shouldReloadCanvas, currentState])\n\n  /**\n   * Update canvas with selected tool\n   * PS: add initialDrawing in dependency so user drawing update reinits tool\n   */\n  useEffect(() => {\n    // Update canvas events with selected tool\n    const selectedTool = new tools[drawingMode](canvas) as FabricTool\n    const cleanupToolEvents = selectedTool.configureCanvas({\n      fillColor: fillColor,\n      strokeWidth: strokeWidth,\n      strokeColor: strokeColor,\n      displayRadius: displayRadius\n    })\n\n    canvas.on(\"mouse:up\", (e: any) => {\n      saveState(canvas.toJSON())\n      if (e[\"button\"] === 3) {\n        forceStreamlitUpdate()\n      }\n    })\n\n    canvas.on(\"mouse:dblclick\", () => {\n      saveState(canvas.toJSON())\n    })\n\n    // Cleanup tool + send data to Streamlit events\n    return () => {\n      cleanupToolEvents()\n      canvas.off(\"mouse:up\")\n      canvas.off(\"mouse:dblclick\")\n    }\n  }, [\n    canvas,\n    strokeWidth,\n    strokeColor,\n    displayRadius,\n    fillColor,\n    drawingMode,\n    initialDrawing,\n    saveState,\n    forceStreamlitUpdate,\n  ])\n\n  /**\n   * Render canvas w/ toolbar\n   */\n  return (\n    <div style={{ position: \"relative\" }}>\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          zIndex: -10,\n          visibility: \"hidden\",\n        }}\n      >\n        <UpdateStreamlit\n          canvasHeight={canvasHeight}\n          canvasWidth={canvasWidth}\n          shouldSendToStreamlit={\n            realtimeUpdateStreamlit || forceSendToStreamlit\n          }\n          stateToSendToStreamlit={currentState}\n        />\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          zIndex: 0,\n        }}\n      >\n        <canvas\n          id=\"backgroundimage-canvas\"\n          width={canvasWidth}\n          height={canvasHeight}\n        />\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          zIndex: 10,\n        }}\n      >\n        <canvas\n          id=\"canvas\"\n          width={canvasWidth}\n          height={canvasHeight}\n          style={{ border: \"lightgrey 1px solid\" }}\n        />\n      </div>\n      {displayToolbar && (\n        <CanvasToolbar\n          topPosition={canvasHeight}\n          leftPosition={canvasWidth}\n          canUndo={canUndo}\n          canRedo={canRedo}\n          downloadCallback={forceStreamlitUpdate}\n          undoCallback={undo}\n          redoCallback={redo}\n          resetCallback={() => {\n            resetState(initialState)\n          }}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default withStreamlitConnection(DrawableCanvas)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport DrawableCanvas from \"./DrawableCanvas\"\nimport { CanvasStateProvider } from \"./DrawableCanvasState\"\n\nimport \"./index.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <CanvasStateProvider>\n      <DrawableCanvas />\n    </CanvasStateProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}